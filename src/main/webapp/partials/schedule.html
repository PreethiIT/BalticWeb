<div id="schedule" class="schedule" x-ng-controller="embryo.ScheduleCtrl">
	<div>
		<h2>
			<a class="close embryo-close-panel" href="#" style="float: right">&times;</a> Schedule
		</h2>
	</div>
	<div x-ng-show="alertMessages" class="alert alert-error">
		<span ng-repeat="msg in alertMessages">{{msg}}<br /></span>
	</div>
	<div x-ng-show="message" class="alert alert-info">{{message}}</div>

	<form name="scheduleEditForm" class="form-horizontal">
		<table class="table">
			<thead>
				<tr>
					<th>Location</th>
					<th>Latitude</th>
					<th>Longitude</th>
					<th>Arrival</th>
					<th>Departure</th>
					<th>Crew</th>
					<th>Passengers</th>
					<th>Doctor</th>
				</tr>
			</thead>
			<tbody x-ng-repeat="voyage in voyages" class="content">
				<tr class="voyage" x-ng-class="{warning : activeRouteId && activeRouteId == voyage.route.id}">
					<td><input ng-model="voyage.berthName" fn-selected="berthSelected(voyage, datum)"
						fn-autocompleted="berthSelected(voyage, datum)" class="input-large siyTypeahead" datasets="berths" type="text"
						x-ng-required="!$parent.$last" /></td>
					<td><input x-ng-model="voyage.latitude" type="text" class="input-small lat" /></td>
					<td><input x-ng-model="voyage.longitude" type="text" class="input-small lon" /></td>
					<td><input x-ng-model="voyage.arrival" type="text" class="input-medium" placeholder="dd-MM-yy hh:mm" /></td>
					<td><input x-ng-model="voyage.departure" type="text" class="input-medium" placeholder="dd-MM-yy hh:mm"
						x-ng-required="!$last" /></td>
					<td><input x-ng-model="voyage.crew" type="text" class="input-mini" /></td>
					<td><input x-ng-model="voyage.passengers" type="text" class="input-mini" /></td>
					<td><select x-ng-model="voyage.doctor" class="input-small"
						ng-options="value as key for (key, value) in options">
							<option value="">---</option>
					</select></td>
				</tr>
				<tr class="route" x-ng-class="{warning : activeRouteId && activeRouteId == voyage.route.id}">
					<td colspan="3"><span ng-show="voyage.route">Route <span style="font-style: italic;">{{voyage.route.name}}</span>
							from {{voyage.route.dep}} to {{voyage.route.des}} with {{voyage.route.waypointCount}} way points
					</span> <span ng-show="!voyage.route">No route</span></td>
					<td colspan="4"><span class="pull-right">
							<button type="button" ng-show="activeRouteId != voyage.route.id && voyage.route" class="btn btn-success"
								x-ng-click="activate(voyage, $event)">Activate</button>
							<button type="button" ng-show="activeRouteId == voyage.route.id && voyage.route" class="btn btn-warning"
								x-ng-click="deactivate(voyage, $event)">Deactivate</button>
							<button type="button" ng-hide="!voyage.maritimeId" class="btn" x-ng-click="editRoute($index)">
								<span x-ng-show="voyage.route">Edit route</span><span x-ng-show="!voyage.route">Create route</span>
							</button>
							<button type="button" ng-hide="!voyage.maritimeId" class="btn" x-ng-click="uploadRoute(voyage)">Upload
								route</button>
					</span></td>
					<td><button class="btn btn-danger" x-ng-show="!$last" x-ng-disabled="isActive(voyage)"
							x-ng-click="del($index)">Delete</button></td>
				</tr>
			</tbody>
			<tbody>
				<tr class="lastRow">
					<td colspan="7"><span class="pull-right">
							<button type="button" class="btn" x-ng-click="reset()">Reset</button>
					</span></td>
					<td>
						<button type="button" class="btn btn-primary" x-ng-click="save()">Save</button>
					</td>
				</tr>
			</tbody>

		</table>
	</form>
</div>
